!function r(e,t,n){function o(i,a){if(!t[i]){if(!e[i]){var s="function"==typeof require&&require;if(!a&&s)return s(i,!0);if(u)return u(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var l=t[i]={exports:{}};e[i][0].call(l.exports,function(r){var t=e[i][1][r];return o(t?t:r)},l,l.exports,r,e,t,n)}return t[i].exports}for(var u="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(r,e,t){"use strict";function n(r,e){return"_id"in e||(e._id=1),u.chain(r).map(function(r){return i.$expressionObject(r,e,r)})}function o(r,e){u.isArray(e)||(e=[e]),r=u.chain(r);for(var t=e.length-1;t<e.length;t++){var o=e[t];o.$project&&(r=n(r,o.$project))}return r}Object.defineProperty(t,"__esModule",{value:!0});var u=r("lodash"),i=r("./expressions");t["default"]={aggregate:o,$project:n},e.exports=t["default"]},{"./expressions":3,lodash:void 0}],2:[function(r,e,t){"use strict";function n(r){return o.size(r)}Object.defineProperty(t,"__esModule",{value:!0});var o=r("lodash");t["default"]={count:n},e.exports=t["default"]},{lodash:void 0}],3:[function(r,e,t){"use strict";function n(r){return r&&r.__esModule?r:{"default":r}}function o(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function u(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function i(r){return"string"==typeof r&&0===r.indexOf("$")&&-1===r.indexOf("$$")}function a(r){return"string"==typeof r&&0===r.indexOf("$$")}function s(r){return v.isObject(r)&&!f(r)&&!v.isArray(r)}function f(r){return 1===v.size(r)&&v.keys(r)[0]in $["default"]}function l(r,e,t){var n;if(void 0===t&&(t=r),f(e))n=g(t,e,t);else if(i(e))n=c(r,e);else{if(!s(e)){if(a(e))throw Error("System Variables are not currently supported");return e}n=y(r,e,t)}return n}function c(r,e){if(e=e.slice(1),-1!==e.indexOf(".")){e=e.split(".");var t=e.shift(),n=v.get(r,t);return v.isArray(n)?v.pluck(n,e):v.get(n,e)}return v.get(r,e)}function g(r,e,t){var n,u=v.keys(e)[0],i=e[u],a=$["default"][u];return v.isArray(i)||(i=[i]),i=i.map(function(e){return l(r,e,t)}),n=a.apply(void 0,o(i))}function y(r,e,t){var n={};void 0===t&&(t=r);var o=function(o){var i=t,s=e[o];if(-1!==o.indexOf(".")){a=o.split(".");var f=a.shift(),c=v.get(r,f);v.isArray(c)?v.set(n,f,c.map(function(r){return l(r,u({},a.join("."),s),t)})):v.merge(n,v.set({},f,l(c,u({},a.join("."),s),t)))}else{if(s===!0||1===s)i=r,s="$"+o;else{if(s===!1||0===s)return"continue";"string"==typeof s?i=t:"object"==typeof s&&(i=v.get(r,o))}v.isArray(i)?v.merge(n,v.set({},o,i.map(function(r){return l(r,s,t)}))):v.merge(n,v.set({},o,l(i,s,t)))}};for(var i in e)var a,s=o(i);return n}function p(){}function d(){}Object.defineProperty(t,"__esModule",{value:!0});var v=r("lodash"),m=r("../operators"),$=n(m);t["default"]={$expression:l,$fieldPath:c,$systemVariable:p,$literal:d,$expressionObject:y},e.exports=t["default"]},{"../operators":4,lodash:void 0}],4:[function(r,e,t){"use strict";function n(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function o(){for(var r=arguments.length,e=Array(r),t=0;r>t;t++)e[t]=arguments[t];return console.log("$and",e),O.every(e)}function u(){for(var r=arguments.length,e=Array(r),t=0;r>t;t++)e[t]=arguments[t];return O.some(e)}function i(){for(var r=arguments.length,e=Array(r),t=0;r>t;t++)e[t]=arguments[t];return!O.some(e)}function a(r){return O.unique(r).sort(d)}function s(){for(var r=arguments.length,e=Array(r),t=0;r>t;t++)e[t]=arguments[t];var n=e.map(a),o=n[0];return O.every(n,O.partial(O.isEqual,o))}function f(){return a(O.intersection.apply(void 0,arguments))}function l(){for(var r=arguments.length,e=Array(r),t=0;r>t;t++)e[t]=arguments[t];return O.union.apply(void 0,n(e.map(a)))}function c(){for(var r=arguments.length,e=Array(r),t=0;r>t;t++)e[t]=arguments[t];return O.difference.apply(void 0,n(e.map(a)))}function g(r,e){return O.isEqual(a(O.intersection(r,e)),a(r))}function y(r){return u.apply(void 0,n(r))}function p(r){return o.apply(void 0,n(r))}function d(r,e){return console.log("cmp",r,e),O.isArray(r)&&O.isArray(e)?0:A(r,e)?-1:m(r,e)?1:0}function v(r,e){return console.log("$eq",arguments[0],arguments[1]),O.isEqual(r,e)}function m(r,e){return console.log("$gt",arguments[0],arguments[1]),O.isArray(e)&&!O.isArray(r)?!1:O.isArray(r)&&!O.isArray(e)?!0:O.gt(r,e)}function $(r,e){return console.log("$gte",arguments[0],arguments[1]),O.isArray(e)&&!O.isArray(r)?!1:O.isArray(r)&&!O.isArray(e)?!0:O.gte(r,e)}function A(r,e){return console.log("$lt",arguments[0],arguments[1]),O.isArray(e)&&!O.isArray(r)?!0:O.isArray(r)&&!O.isArray(e)?!1:O.lt(r,e)}function h(r,e){return console.log("$lte",arguments[0],arguments[1]),O.isArray(e)&&!O.isArray(r)?!0:O.isArray(r)&&!O.isArray(e)?!1:O.lte(r,e)}function x(r,e){return!v(r,e)}function b(r,e,t){return r.slice(e,e+t)}Object.defineProperty(t,"__esModule",{value:!0});var O=r("lodash");t["default"]={$and:o,$or:u,$not:i,$setEquals:s,$setIntersection:f,$setUnion:l,$setDifference:c,$setIsSubset:g,$anyElementTrue:y,$allElementsTrue:p,$cmp:d,$gt:m,$gte:$,$lt:A,$lte:h,$ne:x,$substr:b},e.exports=t["default"]},{lodash:void 0}],5:[function(r,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./aggregation"),o=r("./count"),u=r("./expressions"),i={aggregate:n.aggregate,count:o.count,$expression:u.$expression};t["default"]=i,e.exports=t["default"]},{"./aggregation":1,"./count":2,"./expressions":3}]},{},[5]);